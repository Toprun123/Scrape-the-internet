/*
 * Library based upon the funapi's api for scraping the internet.
 * Created by Syed Daanish.
 * this library works in coordination with funapi's site.
 * please visit https://localhost/ for more information.
 */
'use strict';
let requestDataByClassname,getPage,requestDataById;function parseHTML(e){try{if(null!=typeof window.DOMParser){var t,r=new DOMParser;return null!=(t=r.parseFromString(e,"text/html"))?t:(e=e.replace(/&/gi,"j!J!"),t=r.parseFromString(e,"text/xml"))}return(t=document.implementation.createHTMLDocument("")).write(e),t.close,t}catch(e){alert("Error parsing html:\n"+e.message)}}const scrapejs={HTML:"<mode=Html[object ScrapeJS]/>",TEXT:"<mode=Text[object ScrapeJS]/>"};navigator.onLine?(requestDataByClassname=function(e,t){return new Promise((r,s)=>{"string"!=typeof e.address&&s("address is not provided or is not a string type.");let a=e.address.replace("&","[amp$").replace("=","[equ$");fetch("http://localhost/our_api.php?addr="+a+"&by=true").then(e=>e.text()).then(a=>{let n=parseHTML(a).getElementsByClassName(e.class),o=[];if(t==scrapejs.HTML);else if(t==scrapejs.TEXT){for(let e=0;e<n.length;e++)o.push(n[e].innerText);r(o)}else s("mode is not one of scrapejs.TEXT or scrapejs.HTML");r(n)})})},requestDataById=function(e,t){return new Promise((r,s)=>{"string"!=typeof e.address&&s("address is not provided or is not a string type.");let a=e.address.replace("&","[amp$").replace("=","[equ$");fetch("http://localhost/our_api.php?addr="+a+"&by=true").then(e=>e.text()).then(a=>{let n=parseHTML(a),o=n.getElementById(e.id),c="";if(e.loadStylesheets)for(var i=n.getElementsByTagName("style"),p=0;p<i.length;p++)c+=i[p].outerHTML;if(e.loadScripts){var l=n.getElementsByTagName("script");for(p=0;p<l.length;p++)l[p].src&&("/"!=l[p].src.charAt(0)&&"."!=l[p].src.charAt(0)||l[p].setAttribute("src",e.address+"/"+l[p].src)),c+=l[p].outerHTML}"string"==typeof e.src&&o.hasAttribute(e.src)&&("/"!=o.getAttribute(e.src).charAt(0)&&"."!=o.getAttribute(e.src).charAt(0)||o.setAttribute(e.src,e.address+"/"+o.getAttribute(e.src))),t==scrapejs.HTML?((e.loadScripts||e.loadStylesheets)&&r(parseHTML('<div id="scrapedContent">'+c+o.outerHTML+"</div>").getElementById("scrapedContent")),r(o)):t==scrapejs.TEXT?r(o.innerHTML.replace(/\<(\/?)(.*?)\>/g,"")):s("mode is not one of scrapejs.TEXT or scrapejs.HTML")})})},getPage=function(e){return new Promise((t,r)=>{e=e.replace("&","[amp$").replace("=","[equ$"),fetch("http://localhost/our_api.php?addr="+e+"&by=true").then(e=>e.text()).then(e=>{t(parseHTML(e))})})}):(requestDataByClassname=function(e,t){return new Promise((e,t)=>{t("No internet")})},requestDataById=function(e,t){return new Promise((e,t)=>{t("No internet")})},getPage=function(e,t){return new Promise((e,t)=>{t("No internet")})});
