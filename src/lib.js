/*
 * Library based upon the funapi's api for scraping the internet.
 * Created by Syed Daanish.
 * this library works in coordination with funapi's site.
 * please visit https://localhost/ for more information.
 */
let requestDataByClassname,getPage,requestDataById;function parseHTML(e){try{if(null!=typeof window.DOMParser){var t,r=new DOMParser;return null!=(t=r.parseFromString(e,"text/html"))?t:(e=e.replace(/&/gi,"j!J!"),t=r.parseFromString(e,"text/xml"))}return(t=document.implementation.createHTMLDocument("")).write(e),t.close,t}catch(e){alert("Error parsing html:\n"+e.message)}}const scrapejs={HTML:"<mode=Html[object ScrapeJS]/>",TEXT:"<mode=Text[object ScrapeJS]/>"};navigator.onLine?(requestDataByClassname=function(e,t){return new Promise((r,s)=>{"string"!=typeof e.address&&s("address is not provided or is not a string type.");let a=e.address.replace("&","[amp$").replace("=","[equ$");fetch("http://localhost/our_api.php?addr="+a+"&by=true").then(e=>e.text()).then(a=>{let n=parseHTML(a).getElementsByClassName(e.class),o=[];if(t==scrapejs.HTML);else if(t==scrapejs.TEXT){for(let e=0;e<n.length;e++)o.push(n[e].innerTEXT);r(o)}else s("mode is not one of scrapejs.TEXT or scrapejs.HTML");r(n)})})},requestDataById=function(e,t){return new Promise((r,s)=>{"string"!=typeof e.address&&s("address is not provided or is not a string type.");let a=e.address.replace("&","[amp$").replace("=","[equ$");fetch("http://localhost/our_api.php?addr="+a+"&by=true").then(e=>e.text()).then(a=>{html=parseHTML(a),final_out=html.getElementById(e.id);let n="";if(e.loadStylesheets)for(var o=html.getElementsByTagName("style"),i=0;i<o.length;i++)n+=o[i].outerHTML;if(e.loadScripts){var l=html.getElementsByTagName("script");for(i=0;i<l.length;i++)l[i].src&&("/"!=l[i].src.charAt(0)&&"."!=l[i].src.charAt(0)||l[i].setAttribute("src",e.address+"/"+l[i].src)),n+=l[i].outerHTML}"string"==typeof e.src&&final_out.hasAttribute(e.src)&&("/"!=final_out.getAttribute(e.src).charAt(0)&&"."!=final_out.getAttribute(e.src).charAt(0)||final_out.setAttribute(e.src,e.address+"/"+final_out.getAttribute(e.src))),t==scrapejs.HTML?((e.loadScripts||e.loadStylesheets)&&r(parseHTML('<div id="scrapedContent">'+n+final_out.outerHTML+"</div>").getElementById("scrapedContent")),r(final_out)):t==scrapejs.TEXT?r(final_out.innerHTML.replace(/\<(\/?)(.*?)\>/g,"")):s("mode is not one of scrapejs.TEXT or scrapejs.HTML")})})},getPage=function(e){return new Promise((t,r)=>{e=e.replace("&","[amp$").replace("=","[equ$"),fetch("http://localhost/our_api.php?addr="+e+"&by=true").then(e=>e.text()).then(e=>{t(parseHTML(e))})})}):(requestDataByClassname=function(e,t){return new Promise((e,t)=>{t("No internet")})},requestDataById=function(e,t){return new Promise((e,t)=>{t("No internet")})},getPage=function(e,t){return new Promise((e,t)=>{t("No internet")})});
